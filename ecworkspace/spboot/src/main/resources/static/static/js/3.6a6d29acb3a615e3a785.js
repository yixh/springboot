webpackJsonp([3],{"7i8y":function(e,t){},ukBg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),o=a.n(r),i=(a("mtWM"),{name:"AddUser",props:{dialogAdd:Object},data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}}],value1:"",value2:""},addr:[{value:"总行",label:"总行"},{value:"泉舜",label:"泉舜"},{value:"翔安",label:"翔安"},{value:"虎园",label:"虎园"}],pay:[{value:"加班费",label:"加班费"},{value:"补休",label:"补休"}],formaddData:{project:"",createdate:"",startdate:"",enddate:"",status:"",overtimereason:"",overtimeposition:""},formaddRules:{project:[{required:!0,message:"项目不能为空",trigger:"blur"}],createdate:[{required:!0,message:"日期不能为空",trigger:"blur"}],startdate:[{required:!0,message:"开始时间不能为空",trigger:"blur"}],enddate:[{required:!0,message:"结束时间不能为空",trigger:"blur"}],overtimereason:[{required:!0,message:"加班事由不能为空",trigger:"blur"}],overtimeposition:[{required:!0,message:"加班地点不能为空",trigger:"blur"}]}}},methods:{dialogFormAdd:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;o()(t.formaddData);t.$axios({url:"/api/overtime/insertSelective",method:"post",data:{uid:parseInt(localStorage.getItem("uid")),project:t.formaddData.project,createdate:t.formaddData.createdate,startdate:t.formaddData.startdate,enddate:t.formaddData.enddate,status:t.formaddData.status,overtimereason:t.formaddData.overtimereason,overtimeposition:t.formaddData.overtimeposition},headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.$message({type:"success",message:"添加信息成功"}),t.dialogAdd.show=!1,t.$emit("update")}),t.$refs[e].resetFields()})}}}),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增加班信息",visible:e.dialogAdd.show},on:{"update:visible":function(t){return e.$set(e.dialogAdd,"show",t)}}},[a("el-form",{ref:"formadd",attrs:{model:e.formaddData,"label-width":"100px",rules:e.formaddRules}},[a("el-form-item",{attrs:{label:"项目",prop:"project"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formaddData.project,callback:function(t){e.$set(e.formaddData,"project",t)},expression:" formaddData.project "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"日期",prop:"createdate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":e.pickerOptions,align:"right"},model:{value:e.formaddData.createdate,callback:function(t){e.$set(e.formaddData,"createdate",t)},expression:" formaddData.createdate "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"startdate"}},[a("el-date-picker",{attrs:{placeholder:"开始时间",type:"datetime","picker-options":e.pickerOptions,align:"right"},model:{value:e.formaddData.startdate,callback:function(t){e.$set(e.formaddData,"startdate",t)},expression:"formaddData.startdate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"enddate"}},[a("el-date-picker",{attrs:{placeholder:"结束时间",type:"datetime","picker-options":e.pickerOptions,align:"right"},model:{value:e.formaddData.enddate,callback:function(t){e.$set(e.formaddData,"enddate",t)},expression:" formaddData.enddate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加班费/补休",prop:"status"}},[a("el-select",{attrs:{clearable:"",placeholder:"补休"},model:{value:e.formaddData.status,callback:function(t){e.$set(e.formaddData,"status",t)},expression:" formaddData.status "}},e._l(e.pay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"加班事由",prop:"overtimereason"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formaddData.overtimereason,callback:function(t){e.$set(e.formaddData,"overtimereason",t)},expression:" formaddData.overtimereason "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加班地点",prop:"overtimeposition"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择地点"},model:{value:e.formaddData.overtimeposition,callback:function(t){e.$set(e.formaddData,"overtimeposition",t)},expression:" formaddData.overtimeposition "}},e._l(e.addr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAdd.show=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogFormAdd("formadd")}}},[e._v("提交")])],1)],1)},staticRenderFns:[]},s=a("VU/8")(i,l,!1,null,null,null).exports,n={name:"EditUser",props:{dialogEdit:Object,formeditData:Object},data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}}],value1:"",value2:""},addr:[{value:"总行",label:"总行"},{value:"泉舜",label:"泉舜"},{value:"翔安",label:"翔安"},{value:"虎园",label:"虎园"}],pay:[{value:"加班费",label:"加班费"},{value:"补休",label:"补休"}],formeditRules:{project:[{required:!0,message:"项目不能为空",trigger:"blur"}],createdate:[{required:!0,message:"日期不能为空",trigger:"blur"}],startdate:[{required:!0,message:"开始时间不能为空",trigger:"blur"}],enddate:[{required:!0,message:"结束时间不能为空",trigger:"blur"}],overtimereason:[{required:!0,message:"加班事由不能为空",trigger:"blur"}],overtimeposition:[{required:!0,message:"加班地点不能为空",trigger:"blur"}]}}},methods:{dialogFormEdit:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;o()(t.formeditData);t.$axios({url:"/api/overtime/updateSelective",method:"post",data:{id:parseInt(t.formeditData.id),project:t.formeditData.project,createdate:t.formeditData.createdate,startdate:t.formeditData.startdate,enddate:t.formeditData.enddate,status:t.formeditData.status,overtimereason:t.formeditData.overtimereason,overtimeposition:t.formeditData.overtimeposition},headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){t.$message({type:"success",message:"修改信息成功"}),t.dialogEdit.show=!1,t.$emit("update")}),t.$refs[e].resetFields()})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增加班信息",visible:e.dialogEdit.show},on:{"update:visible":function(t){return e.$set(e.dialogEdit,"show",t)}}},[a("el-form",{ref:"formedit",attrs:{model:e.formeditData,"label-width":"100px",rules:e.formeditRules}},[a("el-form-item",{attrs:{label:"项目",prop:"project"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formeditData.project,callback:function(t){e.$set(e.formeditData,"project",t)},expression:" formeditData.project "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"日期",prop:"createdate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":e.pickerOptions,align:"right",disabled:!0},model:{value:e.formeditData.createdate,callback:function(t){e.$set(e.formeditData,"createdate",t)},expression:" formeditData.createdate "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"startdate"}},[a("el-date-picker",{attrs:{placeholder:"开始时间",type:"datetime","picker-options":e.pickerOptions,align:"right"},model:{value:e.formeditData.startdate,callback:function(t){e.$set(e.formeditData,"startdate",t)},expression:"formeditData.startdate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"enddate"}},[a("el-date-picker",{attrs:{placeholder:"结束时间",type:"datetime","picker-options":e.pickerOptions,align:"right"},model:{value:e.formeditData.enddate,callback:function(t){e.$set(e.formeditData,"enddate",t)},expression:" formeditData.enddate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加班费/补休",prop:"status"}},[a("el-select",{attrs:{clearable:"",placeholder:"补休"},model:{value:e.formeditData.status,callback:function(t){e.$set(e.formeditData,"status",t)},expression:" formeditData.status "}},e._l(e.pay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"加班事由",prop:"overtimereason"}},[a("el-input",{attrs:{type:"text"},model:{value:e.formeditData.overtimereason,callback:function(t){e.$set(e.formeditData,"overtimereason",t)},expression:" formeditData.overtimereason "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加班地点",prop:"overtimeposition"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择地点"},model:{value:e.formeditData.overtimeposition,callback:function(t){e.$set(e.formeditData,"overtimeposition",t)},expression:" formeditData.overtimeposition "}},e._l(e.addr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEdit.show=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogFormEdit("formedit")}}},[e._v("提交")])],1)],1)},staticRenderFns:[]},c=a("VU/8")(n,d,!1,null,null,null).exports,m=(a("PJh5"),{name:"UserMain",components:{AddUser:s,EditUser:c},data:function(){return{userData:[],dialogAdd:{show:!1},dialogEdit:{show:!1},month:"",summonth:"",name:localStorage.getItem("name"),uid:localStorage.getItem("uid"),activeName:"first",sumData:[],formeditData:{id:"",project:"",createdate:"",startdate:"",enddate:"",status:"",overtimereason:"",overtimeposition:""}}},methods:{handleAdd:function(){this.dialogAdd.show=!0},handleExit:function(){this.$router.replace("/")},handleEdit:function(e,t){this.dialogEdit.show=!0,this.formeditData={id:t.id,project:t.project,createdate:t.createdate,startdate:t.startdate,enddate:t.enddate,status:t.status,overtimereason:t.overtimereason,overtimeposition:t.overtimeposition}},handleDelete:function(e,t){var a=this;this.$confirm("此操作将删除此条加班记录，是否继续？","警告",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){a.$axios({url:"/api/overtime/delete",method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("token")},data:{id:parseInt(t.id)}}).then(function(e){a.$message({type:"success",message:"删除信息成功"}),a.getUserInfo()})}).catch(function(){})},getUserInfo:function(){var e=this;this.userData=[],this.$axios({url:"/api/overtime/getAllOvertimeRecord",method:"get",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){var a=t.data;a&&a.forEach(function(t){t.uid==e.uid&&e.userData.push(t)})}),this.getUsersum()},getUsersum:function(){var e=this;this.sumData=[];var t=100*new Date(this.summonth).getFullYear()+(new Date(this.summonth).getMonth()+1);this.$axios({url:"/api/overtime/Summary",method:"post",headers:{Authorization:"Bearer "+localStorage.getItem("token")},data:{uid:parseInt(localStorage.getItem("uid")),month:parseInt(t)}}).then(function(t){var a=t.data,r={month:"",workdayB:"",workdayJ:"",weekendB:"",weekendJ:"",holidayB:"",holidayJ:"",allTime:"",allCarpay:"",mealpay:"",paysum:""};r.month=a.month,r.workdayB=a.workdayB,r.workdayJ=a.workdayJ,r.weekendB=a.weekendB,r.weekendJ=a.weekendJ,r.holidayB=a.holidayB,r.holidayJ=a.holidayJ,r.allTime=a.allTime,r.allCarpay=a.allCarpay,r.mealpay=a.allPay,r.paysum=a.allCarpay+a.allPay,e.sumData.push(r)})},searchUser:function(e){var t=this;return this.userData.filter(function(a){if(!e)return a;if(e){var r=new Date(t.month).getFullYear(),o=new Date(t.month).getMonth()+1,i=new Date(a.createdate).getFullYear(),l=new Date(a.createdate).getMonth()+1;if(r==i&&o==l)return a}})},searchUsersum:function(e){}},mounted:function(){this.getUserInfo()}}),u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),e._v(" "),r("div",{staticClass:"aside"},[r("img",{staticClass:"img-aside",attrs:{src:a("bFRx")}}),e._v(" "),r("img",{staticClass:"img-title",attrs:{src:a("iQH9")}}),e._v(" "),e._m(1),e._v(" "),r("div",{staticClass:"user"},[r("img",{staticClass:"user-img",attrs:{src:a("t4L6")}}),e._v(" "),r("p",{staticClass:"user-name"},[e._v(e._s(this.name))])]),e._v(" "),r("router-link",{attrs:{to:"/"}},[r("el-button",{staticClass:"exit",on:{click:function(t){return e.handleExit()}}},[e._v("退出登录")])],1)],1),e._v(" "),r("div",{staticClass:"main"},[r("div",{staticClass:"content"},[r("div",{staticClass:"user-main"},[r("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"加班明细",name:"first"}},[r("el-col",[r("el-form",{attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"统计月份:"}},[r("el-date-picker",{attrs:{width:"20",type:"month",placeholder:"选择登记时间"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),e._v(" "),r("el-form-item",{staticStyle:{float:"right"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline"},on:{click:function(t){return e.handleAdd()}}},[e._v("新增")])],1)],1)],1),e._v(" "),r("div",{staticClass:"main-table"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.searchUser(e.month),border:"",height:"370"}},[r("el-table-column",{attrs:{type:"selection",width:"35",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",width:"50",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"project",label:"项目",width:"115",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.project))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"createdate",label:"日期",width:"115",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("dateformat")(t.row.createdate,"YYYY-MM-DD")))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"startdate",label:"开始时间",width:"115",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("dateformat")(t.row.startdate,"HH:mm")))])]}}])},[e._v("\\\n                  ")]),e._v(" "),r("el-table-column",{attrs:{prop:"enddate",label:"结束时间",width:"115",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e._f("dateformat")(t.row.enddate,"HH:mm")))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"status",label:"加班费/补休",width:"115",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.status))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"overtimereason",label:"加班事由",width:"115",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.overtimereason))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"overtimeposition",label:"加班地点",width:"115",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.overtimeposition))])]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),r("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),r("AddUser",{attrs:{dialogAdd:e.dialogAdd},on:{update:e.getUserInfo}}),e._v(" "),r("EditUser",{attrs:{dialogEdit:e.dialogEdit,formeditData:e.formeditData},on:{update:e.getUserInfo}})],1),e._v(" "),r("el-tab-pane",{attrs:{label:"加班汇总",name:"second"}},[r("el-col",[r("el-form",{attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"统计月份:"}},[r("el-date-picker",{attrs:{width:"20",type:"month",placeholder:"选择登记时间"},model:{value:e.summonth,callback:function(t){e.summonth=t},expression:"summonth"}})],1)],1)],1),e._v(" "),r("div",{staticClass:"main-table"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.sumData,border:"",height:"370"}},[r("el-table-column",{attrs:{fixed:"",prop:"month",label:"月份",width:"105",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"workdayB",label:"平时补休小时数",width:"105",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"weekendB",label:"周末补休小时数",width:"105",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"holidayB",label:"节假日补休小时数",width:"105",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"workdayJ",label:"平时加班小时数",width:"105",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"weekendJ",label:"周末加班小时数",width:"105",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"holidayJ",label:"节假日加班小时数",width:"105",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"allTime",label:"加班小时数",width:"105",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"mealpay",label:"餐补",width:"105",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"allCarpay",label:"交通补贴",width:"105",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"paysum",label:"合计",width:"80",align:"center"}})],1)],1)],1)],1)],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[this._v("加班登记")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"icon"},[this._v("\n            "),t("i",{staticClass:"el-icon-edit-outline"},[this._v("     加班登记")])])}]};var p=a("VU/8")(m,u,!1,function(e){a("7i8y")},"data-v-8132b070",null);t.default=p.exports}});
//# sourceMappingURL=3.6a6d29acb3a615e3a785.js.map